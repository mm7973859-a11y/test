<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AL-BATOUL | Home Care</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --brand-blue: #0077b6;
            --soft-blue: #f8fbff;
            --text-dark: #2d3436;
            --border: #eef2f5;
        }

        body {
            font-family: 'Noto Sans Arabic', sans-serif;
            margin: 0; background: #fff; color: var(--text-dark);
            -webkit-tap-highlight-color: transparent;
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ù…Ø¹ Ø§Ù„ØµÙˆØ±Ø© */
        header {
            padding: 20px 5%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--border);
            background: #fff;
        }

        .brand-container { display: flex; align-items: center; gap: 15px; }
        .brand-logo-img { width: 50px; height: 50px; border-radius: 12px; object-fit: cover; }
        .brand-name { font-size: 22px; font-weight: 700; color: var(--brand-blue); letter-spacing: 1px; }
        .brand-name span { display: block; font-size: 10px; color: #999; font-weight: 300; margin-top: -5px; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª */
        .categories-bar {
            display: flex;
            overflow-x: auto;
            padding: 15px 5%;
            gap: 10px;
            white-space: nowrap;
            background: var(--soft-blue);
            scrollbar-width: none;
        }
        .categories-bar::-webkit-scrollbar { display: none; }
        .cat-item {
            padding: 8px 18px;
            background: #fff;
            border-radius: 20px;
            font-size: 14px;
            border: 1px solid var(--border);
            cursor: pointer;
        }
        .cat-item.active { background: var(--brand-blue); color: #fff; border-color: var(--brand-blue); }

        /* Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
            padding: 20px 5%;
        }

        .product-card {
            background: #fff;
            border: 1px solid var(--border);
            border-radius: 15px;
            overflow: hidden;
            text-align: center;
            padding-bottom: 10px;
        }

        .product-card img {
            width: 100%;
            height: 150px;
            object-fit: contain;
            background: #f9f9f9;
        }

        .product-card h3 { font-size: 15px; margin: 10px 5px; font-weight: 500; }
        .price { color: var(--brand-blue); font-weight: 700; margin-bottom: 10px; display: block; }

        .add-to-cart {
            background: var(--brand-blue);
            color: #fff;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            width: 90%;
            cursor: pointer;
        }

        /* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… (Ù…ÙˆØ¯Ø§Ù„) */
        .modal {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #fff; z-index: 2000;
            display: none; padding: 20px; box-sizing: border-box;
            overflow-y: auto;
        }

        input, select {
            width: 100%; padding: 12px; margin: 8px 0;
            border: 1px solid var(--border); border-radius: 10px;
            background: var(--soft-blue);
        }

        .file-input-label {
            display: block;
            padding: 20px;
            border: 2px dashed var(--brand-blue);
            border-radius: 10px;
            text-align: center;
            color: var(--brand-blue);
            margin: 10px 0;
            cursor: pointer;
        }

        #preview-img { width: 100px; height: 100px; object-fit: cover; display: none; margin: 10px auto; border-radius: 10px; }

        .admin-btn { font-size: 12px; color: #999; border: 1px solid #eee; padding: 4px 10px; border-radius: 5px; cursor: pointer;}
    </style>
</head>
<body>

<header>
    <div class="brand-container">
        <img src="https://img.icons8.com/fluency/96/cleaning-service.png" class="brand-logo-img" alt="Logo">
        <div class="brand-name">
            AL-BATOUL
            <span>LUXURY HOME CARE</span>
        </div>
    </div>
    <div class="admin-btn" onclick="checkAdmin()">Admin</div>
</header>

<div class="categories-bar">
    <div class="cat-item active" onclick="filterCat('Ø§Ù„ÙƒÙ„')">Ø§Ù„ÙƒÙ„</div>
    <div class="cat-item" onclick="filterCat('Ù…Ù†Ø¸ÙØ§Øª Ø³Ø§Ø¦Ù„Ø©')">Ù…Ù†Ø¸ÙØ§Øª Ø³Ø§Ø¦Ù„Ø©</div>
    <div class="cat-item" onclick="filterCat('Ø£Ø¯ÙˆØ§Øª Ù†Ø¸Ø§ÙØ©')">Ø£Ø¯ÙˆØ§Øª Ù†Ø¸Ø§ÙØ©</div>
    <div class="cat-item" onclick="filterCat('Ù…Ø¹Ù‚Ù…Ø§Øª')">Ù…Ø¹Ù‚Ù…Ø§Øª</div>
    <div class="cat-item" onclick="filterCat('ÙˆØ±Ù‚ÙŠØ§Øª')">ÙˆØ±Ù‚ÙŠØ§Øª</div>
</div>

<div class="products-grid" id="main-grid">
    </div>

<div id="admin-modal" class="modal">
    <div onclick="closeModal()" style="color:red; font-weight:bold; cursor:pointer;">&times; Ø¥ØºÙ„Ø§Ù‚</div>
    <h2 style="text-align:center;">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h2>
    
    <label class="file-input-label">
        ğŸ“· Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ù„ØªØµÙˆÙŠØ± Ø£Ùˆ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©
        <input type="file" id="p-file" accept="image/*" style="display:none;" onchange="previewImage(this)">
    </label>
    <img id="preview-img">

    <input type="text" id="p-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
    <input type="number" id="p-price" placeholder="Ø§Ù„Ø³Ø¹Ø±">
    <select id="p-cat">
        <option value="Ù…Ù†Ø¸ÙØ§Øª Ø³Ø§Ø¦Ù„Ø©">Ù…Ù†Ø¸ÙØ§Øª Ø³Ø§Ø¦Ù„Ø©</option>
        <option value="Ø£Ø¯ÙˆØ§Øª Ù†Ø¸Ø§ÙØ©">Ø£Ø¯ÙˆØ§Øª Ù†Ø¸Ø§ÙØ©</option>
        <option value="Ù…Ø¹Ù‚Ù…Ø§Øª">Ù…Ø¹Ù‚Ù…Ø§Øª</option>
        <option value="ÙˆØ±Ù‚ÙŠØ§Øª">ÙˆØ±Ù‚ÙŠØ§Øª</option>
    </select>
    <button class="add-to-cart" style="padding:15px; margin-top:10px;" onclick="uploadProduct()">Ù†Ø´Ø± Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
</div>

<script>
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase
    const firebaseConfig = { databaseURL: "https://testy-89b04-default-rtdb.firebaseio.com" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let allProducts = [];
    let selectedImageData = "";

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
    db.ref('products').on('value', (snapshot) => {
        const grid = document.getElementById('main-grid');
        grid.innerHTML = "";
        allProducts = [];
        snapshot.forEach(child => {
            const p = child.val();
            allProducts.push(p);
            displayProduct(p);
        });
    });

    function displayProduct(p) {
        const grid = document.getElementById('main-grid');
        grid.innerHTML += `
            <div class="product-card" data-cat="${p.cat}">
                <img src="${p.img || 'https://via.placeholder.com/150'}" alt="${p.name}">
                <h3>${p.name}</h3>
                <span class="price">${p.price} Ø¬.Ù…</span>
                <button class="add-to-cart" onclick="alert('ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©')">Ø¥Ø¶Ø§ÙØ©</button>
            </div>
        `;
    }

    // Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ù…Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
    function previewImage(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('preview-img').src = e.target.result;
                document.getElementById('preview-img').style.display = 'block';
                selectedImageData = e.target.result; // ØªØ®Ø²ÙŠÙ† Ø§Ù„ØµÙˆØ±Ø© ÙƒÙ€ Base64
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function uploadProduct() {
        const name = document.getElementById('p-name').value;
        const price = document.getElementById('p-price').value;
        const cat = document.getElementById('p-cat').value;

        if(name && price && selectedImageData) {
            db.ref('products').push({
                name: name,
                price: price,
                cat: cat,
                img: selectedImageData // Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø­Ù…Ù„Ø©
            });
            alert("ØªÙ… Ø±ÙØ¹ Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­!");
            closeModal();
        } else {
            alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ ÙƒØ§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©");
        }
    }

    function checkAdmin() {
        const pass = prompt("ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±:");
        if(pass === "Batoul@Admin#2026") {
            document.getElementById('admin-modal').style.display = 'block';
        }
    }

    function closeModal() { document.getElementById('admin-modal').style.display = 'none'; }

    function filterCat(category) {
        const items = document.querySelectorAll('.cat-item');
        items.forEach(i => i.classList.remove('active'));
        event.target.classList.add('active');

        const grid = document.getElementById('main-grid');
        grid.innerHTML = "";
        allProducts.forEach(p => {
            if(category === 'Ø§Ù„ÙƒÙ„' || p.cat === category) displayProduct(p);
        });
    }
</script>

</body>
</html>
